# simple-windows-services-monitor

**Simple Windows Services Monitor** ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å, 
–∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–ª—É–∂–±–∞–º–∏ (–æ—Å—Ç–∞–Ω–æ–≤–∫–∞, –∑–∞–ø—É—Å–∫, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫, –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞) 
–Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö Windows. 

–î–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [WinRM](https://github.com/masterzen/winrm).

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîë –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT.
- üïπÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É–∂–±–∞–º–∏ Windows (start, stop, restart).
- üì° –†–∞–±–æ—Ç–∞ —Å —É–¥–∞–ª—ë–Ω–Ω—ã–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏ –ø–æ WinRM.
- üì¶ –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL.
- üì¢ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ —Å–ª—É–∂–± –º–µ–∂–¥—É –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìª –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ —Å–ª—É–∂–± —Å —Å–µ—Ä–≤–µ—Ä–∞
- üìú –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
- üóûÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.24+
- PostgreSQL 16+
- Windows Server —Å –≤–∫–ª—é—á—ë–Ω–Ω—ã–º WinRM

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API
[–ö–æ–ª–ª–µ–∫—Ü–∏—è Postman](https://documenter.getpostman.com/view/26097853/2sB3HqHdhN)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WinRM –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

–ù–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º Windows-—Ö–æ—Å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∫–ª—é—á–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å WinRM.  
–û—Ç–∫—Ä–æ–π—Ç–µ PowerShell **–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞** –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

```powershell
winrm quickconfig
y
winrm set winrm/config/service/Auth '@{Basic="true"}'
winrm set winrm/config/service '@{AllowUnencrypted="true"}'
winrm set winrm/config/winrs '@{MaxMemoryPerShellMB="1024"}'
```

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

   ```bash
   git clone https://github.com/trsv-dev/simple-windows-services-monitor.git
   cd simple-windows-services-monitor
   ```
2. –°–æ–∑–¥–∞–π—Ç–µ –ë–î –≤ PostgreSQL:
    ```bash
   psql -h localhost -U postgres
   create database swsm;
   create user swsm with encrypted password 'userpassword';
   grant all privileges on database swsm to swsm;
   alter database swsm owner to swsm;
   ```

3. –°–æ–∑–¥–∞–π—Ç–µ –≤ –∫–æ—Ä–Ω–µ —Ñ–∞–π–ª `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–ø—Ä–∏–º–µ—Ä –¥–∞–Ω –≤ env_example):
    ```env
    # SWSM init vars
    ####################################################################################
    # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    DATABASE_URI=postgres://swsm:userpassword@localhost:5432/swsm?sslmode=disable
    # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
    #DATABASE_URI=postgres://swsm:userpassword@db:5432/swsm?sslmode=disable
    RUN_ADDRESS=127.0.0.1:8080
    LOG_LEVEL=debug
    LOG_OUTPUT=./logs/swsm.log
    AES_KEY=your-base64-key
    SECRET_KEY=your-jwt-secret
    WEB_INTERFACE=true
    
    # Postgres init vars (–¥–ª—è –æ–±—Ä–∞–∑–∞ postgres)
    ####################################################################################
    # —Ç–æ—Ç –∂–µ –ª–æ–≥–∏–Ω, —á—Ç–æ –≤ URI
    POSTGRES_USER=swsm
    # —Ç–æ—Ç –∂–µ –ø–∞—Ä–æ–ª—å, —á—Ç–æ –≤ URI
    POSTGRES_PASSWORD=userpassword
    # —Ç–æ –∂–µ –∏–º—è –ë–î, —á—Ç–æ –≤ URI
    POSTGRES_DB=swsm
   ```

4. –°–æ–±–µ—Ä–∏—Ç–µ –±–∏–Ω–∞—Ä–Ω–∏–∫ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
   ```bash
   cd ./cmd/swsm/
   go build -o "swsm"
   ./swsm
   ```
   
5. –ï—Å–ª–∏ –≤ `env` –≤—ã –æ—Å—Ç–∞–≤–∏–ª–∏ `WEB_INTERFACE=true` —Ç–æ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç–∏–∫–∏. 
–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ —Å—Ç–∞—Ç–∏–∫–∏:
   ```bash
   cd ../../static
   go build -o static-server
   ./static-server -port=3000 -dir=./
   ```
---

## –ó–∞–ø—É—Å–∫ –≤ docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/trsv-dev/simple-windows-services-monitor.git
   cd simple-windows-services-monitor
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ –≤ –∫–æ—Ä–Ω–µ —Ñ–∞–π–ª `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–ø—Ä–∏–º–µ—Ä –¥–∞–Ω –≤ env_example):
    ```env
    # SWSM init vars
    ####################################################################################
    # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    #DATABASE_URI=postgres://swsm:userpassword@localhost:5432/swsm?sslmode=disable
    # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
    DATABASE_URI=postgres://swsm:userpassword@db:5432/swsm?sslmode=disable
    RUN_ADDRESS=127.0.0.1:8080
    LOG_LEVEL=debug
    LOG_OUTPUT=./logs/swsm.log
    AES_KEY=your-base64-key
    SECRET_KEY=your-jwt-secret
    WEB_INTERFACE=true
    
    # Postgres init vars (–¥–ª—è –æ–±—Ä–∞–∑–∞ postgres)
    ####################################################################################
    # —Ç–æ—Ç –∂–µ –ª–æ–≥–∏–Ω, —á—Ç–æ –≤ URI
    POSTGRES_USER=swsm
    # —Ç–æ—Ç –∂–µ –ø–∞—Ä–æ–ª—å, —á—Ç–æ –≤ URI
    POSTGRES_PASSWORD=userpassword
    # —Ç–æ –∂–µ –∏–º—è –ë–î, —á—Ç–æ –≤ URI
    POSTGRES_DB=swsm
   ```
3. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º (–≤ `env` –≤—ã –æ—Å—Ç–∞–≤–∏–ª–∏ `WEB_INTERFACE=true`), 
—Ç–æ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ (–≥–¥–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω `docker-compose.yml`) –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   docker compose --profile frontend up -d --build
   ```
   –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ API (–≤ `env` –≤—ã –æ—Å—Ç–∞–≤–∏–ª–∏ `WEB_INTERFACE=false`),
   —Ç–æ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ (–≥–¥–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω `docker-compose.yml`) –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   docker compose up -d --build
   ```
4. 